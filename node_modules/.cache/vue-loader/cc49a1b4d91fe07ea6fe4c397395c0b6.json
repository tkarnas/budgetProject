{"remainingRequest":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tomis\\Desktop\\vue-diplomski\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\src\\views\\Home.vue","mtime":1676484597078},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675708577019},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\babel-loader\\lib\\index.js","mtime":1675708563485},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675708577019},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\vue-loader\\lib\\index.js","mtime":1675708908543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiIH0gZnJvbSAiQC9maXJlYmFzZSI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlLmpzIjsKaW1wb3J0IFJvbGVGb3JtIGZyb20gIi4uL2NvbXBvbmVudHMvUm9sZUZvcm0udnVlIjsKaW1wb3J0IFRlYW1Gb3JtIGZyb20gIi4uL2NvbXBvbmVudHMvVGVhbUZvcm0udnVlIjsKaW1wb3J0IEV4cGVuc2VzRm9ybSBmcm9tICIuLi9jb21wb25lbnRzL0V4cGVuc2VzRm9ybS52dWUiOwppbXBvcnQgVGVhbXMgZnJvbSAiLi4vY29tcG9uZW50cy9UZWFtcy52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIb21lQ29tcG9uZW50IiwKICBjb21wb25lbnRzOiB7CiAgICBFeHBlbnNlc0Zvcm0sCiAgICBUZWFtRm9ybSwKICAgIFJvbGVGb3JtLAogICAgVGVhbXMsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNBZG1pbjogZmFsc2UsCiAgICAgIGlzVGVhbUxlYWQ6IGZhbHNlLAogICAgICBpc1VzZXI6IGZhbHNlLAogICAgICB0ZWFtc0FycjogW10sCiAgICAgIGV4cGFuZFJvbGVGb3JtOiBmYWxzZSwKICAgICAgZXhwYW5kQ3JlYXRlRm9ybTogZmFsc2UsCiAgICAgIGV4cGFuZEV4cGVuc2VzRm9ybTogZmFsc2UsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0UGFnZUJ5Um9sZXMoKTsKICAgIHRoaXMuZ2V0VGVhbXMoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBhbGxUZWFtc0FuZFByb2plY3RzKCkgewogICAgICBsZXQgYXJyID0ge307CiAgICAgIGNvbnN0IGFycjIgPSBbXTsKICAgICAgY29uc3QgYXJyMyA9IFtdOwogICAgICBmb3IgKGNvbnN0IHRlYW0gb2YgdGhpcy50ZWFtc0FycikgewogICAgICAgIGxldCBwcm9qZWN0ID0gewogICAgICAgICAgdGVhbU5hbWU6IHRlYW0udGVhbU5hbWUsCiAgICAgICAgICB0ZWFtQnVkZ2V0OiB0ZWFtLnRlYW1CdWRnZXQsCiAgICAgICAgICBwcm9qZWN0czogdGVhbS5wcm9qZWN0cywKICAgICAgICAgIHRlYW1sZWFkOiB0ZWFtLnRlYW1sZWFkLAogICAgICAgIH07CiAgICAgICAgYXJyMi5wdXNoKHByb2plY3QpOwogICAgICAgIGlmICh0ZWFtLnByb2plY3RzLmxlbmd0aCkgewogICAgICAgICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHRlYW0ucHJvamVjdHMpIHsKICAgICAgICAgICAgYXJyMy5wdXNoKHByb2plY3QpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBhcnIgPSB7CiAgICAgICAgdGVhbXNXaXRoUHJvamVjdHM6IGFycjIsCiAgICAgICAgb25seVByb2plY3N0czogYXJyMywKICAgICAgfTsKICAgICAgcmV0dXJuIGFycjsKICAgIH0sCiAgICByaWdodHMoKSB7CiAgICAgIGxldCByaWdodHM7CiAgICAgIGlmICh0aGlzLmlzQWRtaW4pIHsKICAgICAgICByaWdodHMgPSAiQWRtaW4iOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNUZWFtTGVhZCkgewogICAgICAgIHJpZ2h0cyA9ICJUZWFtIExlYWQiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNVc2VyKSB7CiAgICAgICAgcmlnaHRzID0gIlVzZXIiOwogICAgICB9CiAgICAgIHJldHVybiByaWdodHM7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgc2V0UGFnZUJ5Um9sZXMoKSB7CiAgICAgIGRiLmNvbGxlY3Rpb24oInVzZXJzIikKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigocXVlcnkpID0+IHsKICAgICAgICAgIGNvbnN0IHVzZXJzID0gW107CiAgICAgICAgICBxdWVyeS5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7CiAgICAgICAgICAgIHVzZXJzLnB1c2goewogICAgICAgICAgICAgIGRhdGEsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgdXNlcnMpIHsKICAgICAgICAgICAgICBpZiAodXNlci5kYXRhLnVzZXIgPT09IHN0b3JlLmN1cnJlbnRVc2VyKSB7CiAgICAgICAgICAgICAgICBpZiAodXNlci5kYXRhLmlzQWRtaW4pIHsKICAgICAgICAgICAgICAgICAgdGhpcy5pc0FkbWluID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlci5kYXRhLmlzVGVhbUxlYWQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5pc1RlYW1MZWFkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaXNVc2VyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGdldFRlYW1zKCkgewogICAgICBkYi5jb2xsZWN0aW9uKCJ0ZWFtcyIpCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oKHF1ZXJ5KSA9PiB7CiAgICAgICAgICB0aGlzLnRlYW1zQXJyID0gW107CiAgICAgICAgICBxdWVyeS5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7CiAgICAgICAgICAgIHRoaXMudGVhbXNBcnIucHVzaCh7CiAgICAgICAgICAgICAgdGVhbU5hbWU6IGRhdGEubmFtZSwKICAgICAgICAgICAgICB0ZWFtQnVkZ2V0OiBkYXRhLmJ1ZGdldCwKICAgICAgICAgICAgICB0ZWFtbGVhZDogZGF0YS50ZWFtbGVhZCwKICAgICAgICAgICAgICBwcm9qZWN0czogZGF0YS5wcm9qZWN0cywKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div ref_testcafe=\"home\">\n    <div class=\"flex\" v-if=\"isAdmin || isTeamLead\">\n      <button\n        class=\"button\"\n        :class=\"{ clicked: expandRoleForm }\"\n        v-if=\"isAdmin\"\n        @click=\"expandRoleForm = !expandRoleForm;expandCreateForm=false;expandExpensesForm=false\"\n        ref_testcafe=\"setRolesForm\"\n      >\n        Set roles\n      </button>\n      <button\n        class=\"button\"\n        :class=\"{ clicked: expandExpensesForm }\"\n        @click=\"expandExpensesForm = !expandExpensesForm;expandCreateForm=false;expandRoleForm=false\"\n        ref_testcafe=\"addExpensesForm\"\n      >\n        Add new expenses\n      </button>\n      <button\n        v-if=\"isAdmin\"\n        class=\"button\"\n        :class=\"{ clicked: expandCreateForm }\"\n        @click=\"expandCreateForm = !expandCreateForm;expandExpensesForm=false;expandRoleForm=false\"\n        ref_testcafe=\"addTeamForm\"\n      >\n        Add team\n      </button>\n    </div>\n    <div class=\"boxes\">\n      <div class=\"box\" v-if=\"expandRoleForm\">\n        <RoleForm\n          :rights=\"rights\"\n          :isAdmin=\"isAdmin\"\n          @call-get-teams=\"getTeams\"\n          :allTeamsAndProjects=\"allTeamsAndProjects\"\n        ></RoleForm>\n      </div>\n      <div class=\"box\" v-if=\"expandExpensesForm\">\n        <ExpensesForm\n          :rights=\"rights\"\n          :isAdmin=\"isAdmin\"\n          :isTeamLead=\"isTeamLead\"\n          :isUser=\"isUser\"\n          :allTeamsAndProjects=\"allTeamsAndProjects\"\n          @call-get-teams=\"getTeams\"\n        ></ExpensesForm>\n      </div>\n      <div class=\"box\" v-if=\"expandCreateForm\">\n        <TeamForm\n          :rights=\"rights\"\n          :isAdmin=\"isAdmin\"\n          @call-get-teams=\"getTeams\"\n        ></TeamForm>\n      </div>\n    </div>\n    <Teams\n      :rights=\"rights\"\n      :isAdmin=\"isAdmin\"\n      :isTeamLead=\"isTeamLead\"\n      :isUser=\"isUser\"\n      :teamsArr=\"teamsArr\"\n      @call-get-teams=\"getTeams\"\n    ></Teams>\n  </div>\n</template>\n\n<script>\nimport { db } from \"@/firebase\";\nimport store from \"@/store.js\";\nimport RoleForm from \"../components/RoleForm.vue\";\nimport TeamForm from \"../components/TeamForm.vue\";\nimport ExpensesForm from \"../components/ExpensesForm.vue\";\nimport Teams from \"../components/Teams.vue\";\n\nexport default {\n  name: \"HomeComponent\",\n  components: {\n    ExpensesForm,\n    TeamForm,\n    RoleForm,\n    Teams,\n  },\n  data() {\n    return {\n      isAdmin: false,\n      isTeamLead: false,\n      isUser: false,\n      teamsArr: [],\n      expandRoleForm: false,\n      expandCreateForm: false,\n      expandExpensesForm: false,\n    };\n  },\n  created() {\n    this.setPageByRoles();\n    this.getTeams();\n  },\n  computed: {\n    allTeamsAndProjects() {\n      let arr = {};\n      const arr2 = [];\n      const arr3 = [];\n      for (const team of this.teamsArr) {\n        let project = {\n          teamName: team.teamName,\n          teamBudget: team.teamBudget,\n          projects: team.projects,\n          teamlead: team.teamlead,\n        };\n        arr2.push(project);\n        if (team.projects.length) {\n          for (const project of team.projects) {\n            arr3.push(project);\n          }\n        }\n      }\n      arr = {\n        teamsWithProjects: arr2,\n        onlyProjecsts: arr3,\n      };\n      return arr;\n    },\n    rights() {\n      let rights;\n      if (this.isAdmin) {\n        rights = \"Admin\";\n      } else if (this.isTeamLead) {\n        rights = \"Team Lead\";\n      } else if (this.isUser) {\n        rights = \"User\";\n      }\n      return rights;\n    },\n  },\n  methods: {\n    setPageByRoles() {\n      db.collection(\"users\")\n        .get()\n        .then((query) => {\n          const users = [];\n          query.forEach((doc) => {\n            const data = doc.data();\n            users.push({\n              data,\n            });\n            for (const user of users) {\n              if (user.data.user === store.currentUser) {\n                if (user.data.isAdmin) {\n                  this.isAdmin = true;\n                } else if (user.data.isTeamLead) {\n                  this.isTeamLead = true;\n                } else {\n                  this.isUser = true;\n                }\n              }\n            }\n          });\n        });\n    },\n    async getTeams() {\n      db.collection(\"teams\")\n        .get()\n        .then((query) => {\n          this.teamsArr = [];\n          query.forEach((doc) => {\n            const data = doc.data();\n            this.teamsArr.push({\n              teamName: data.name,\n              teamBudget: data.budget,\n              teamlead: data.teamlead,\n              projects: data.projects,\n            });\n          });\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\ndiv {\n  padding: 10px;\n  font-size: 18px;\n  cursor: pointer;\n}\n\n.box {\n  width: 33%;\n  padding: 10px;\n  border-radius: 10px;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: center;\n}\n\n.boxes {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n}\n\n.flex {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n}\n\n.expanded {\n  background-color: lightgray;\n}\n\n.button {\n  width: 20%;\n  background-color: white;\n  font-weight: bold;\n  border: none;\n  border-radius: 10px;\n}\n\n.button {\n  &:hover {\n    background-color: lightgray;\n    &::after {\n      content: \"\";\n      display: block;\n      width: 20%;\n      margin: 0 auto;\n      height: 3px;\n      background-color: lightgray;\n    }\n  }\n  &:focus {\n    outline: none;\n  }\n}\n\n.clicked {\n  &::after {\n    content: \"\";\n    display: block;\n    width: 20%;\n    margin: 0 auto;\n    height: 3px;\n    background-color: rgba(250, 64, 64, 0.596);\n  }\n}\n</style>"]}]}