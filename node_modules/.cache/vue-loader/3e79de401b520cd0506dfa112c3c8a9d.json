{"remainingRequest":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tomo/Documents/projects/vue-diplomski/src/views/Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=scss&","dependencies":[{"path":"/Users/tomo/Documents/projects/vue-diplomski/src/views/Home.vue","mtime":1680948623763},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/css-loader/dist/cjs.js","mtime":1680948621394},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1680948623381},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/postcss-loader/src/index.js","mtime":1680948622442},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/sass-loader/dist/cjs.js","mtime":1680948622702},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/cache-loader/dist/cjs.js","mtime":1680948621095},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/vue-loader/lib/index.js","mtime":1680948623381}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpkaXYgewogIHBhZGRpbmc6IDEwcHg7CiAgZm9udC1zaXplOiAxOHB4OwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLmJveCB7CiAgd2lkdGg6IDMzJTsKICBwYWRkaW5nOiAxMHB4OwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBqdXN0aWZ5LWNvbnRlbnQ6IHN0cmV0Y2g7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLmJveGVzIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgd2lkdGg6IDEwMCU7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7CiAgZmxleC13cmFwOiB3cmFwOwp9CgouZmxleCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5Owp9CgouZXhwYW5kZWQgewogIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTsKfQoKLmJ1dHRvbiB7CiAgd2lkdGg6IDIwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICBmb250LXdlaWdodDogYm9sZDsKICBib3JkZXI6IG5vbmU7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQoKLmJ1dHRvbiB7CiAgJjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7CiAgICAmOjphZnRlciB7CiAgICAgIGNvbnRlbnQ6ICIiOwogICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgd2lkdGg6IDIwJTsKICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgIGhlaWdodDogM3B4OwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7CiAgICB9CiAgfQogICY6Zm9jdXMgewogICAgb3V0bGluZTogbm9uZTsKICB9Cn0KCi5jbGlja2VkIHsKICAmOjphZnRlciB7CiAgICBjb250ZW50OiAiIjsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgd2lkdGg6IDIwJTsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgaGVpZ2h0OiAzcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1MCwgNjQsIDY0LCAwLjU5Nik7CiAgfQp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div ref_testcafe=\"home\">\n    <div class=\"flex\" v-if=\"isAdmin || isTeamLead\">\n      <button\n        class=\"button\"\n        :class=\"{ clicked: expandRoleForm }\"\n        v-if=\"isAdmin\"\n        @click=\"expandRoleForm = !expandRoleForm;expandCreateForm=false;expandExpensesForm=false\"\n        ref_testcafe=\"setRolesForm\"\n      >\n        Set roles\n      </button>\n      <button\n        class=\"button\"\n        :class=\"{ clicked: expandExpensesForm }\"\n        @click=\"expandExpensesForm = !expandExpensesForm;expandCreateForm=false;expandRoleForm=false\"\n        ref_testcafe=\"addExpensesForm\"\n      >\n        Add new expenses\n      </button>\n      <button\n        v-if=\"isAdmin\"\n        class=\"button\"\n        :class=\"{ clicked: expandCreateForm }\"\n        @click=\"expandCreateForm = !expandCreateForm;expandExpensesForm=false;expandRoleForm=false\"\n        ref_testcafe=\"addTeamForm\"\n      >\n        Add team\n      </button>\n    </div>\n    <div class=\"boxes\">\n      <div class=\"box\" v-if=\"expandRoleForm\">\n        <RoleForm\n          :rights=\"rights\"\n          :isAdmin=\"isAdmin\"\n          @call-get-teams=\"getTeams\"\n          :allTeamsAndProjects=\"allTeamsAndProjects\"\n        ></RoleForm>\n      </div>\n      <div class=\"box\" v-if=\"expandExpensesForm\">\n        <ExpensesForm\n          :rights=\"rights\"\n          :isAdmin=\"isAdmin\"\n          :isTeamLead=\"isTeamLead\"\n          :isUser=\"isUser\"\n          :allTeamsAndProjects=\"allTeamsAndProjects\"\n          @call-get-teams=\"getTeams\"\n        ></ExpensesForm>\n      </div>\n      <div class=\"box\" v-if=\"expandCreateForm\">\n        <TeamForm\n          :rights=\"rights\"\n          :isAdmin=\"isAdmin\"\n          @call-get-teams=\"getTeams\"\n        ></TeamForm>\n      </div>\n    </div>\n    <Teams\n      :rights=\"rights\"\n      :isAdmin=\"isAdmin\"\n      :isTeamLead=\"isTeamLead\"\n      :isUser=\"isUser\"\n      :teamsArr=\"teamsArr\"\n      @call-get-teams=\"getTeams\"\n    ></Teams>\n  </div>\n</template>\n\n<script>\nimport { db } from \"@/firebase\";\nimport store from \"@/store.js\";\nimport RoleForm from \"../components/RoleForm.vue\";\nimport TeamForm from \"../components/TeamForm.vue\";\nimport ExpensesForm from \"../components/ExpensesForm.vue\";\nimport Teams from \"../components/Teams.vue\";\n\nexport default {\n  name: \"HomeComponent\",\n  components: {\n    ExpensesForm,\n    TeamForm,\n    RoleForm,\n    Teams,\n  },\n  data() {\n    return {\n      isAdmin: false,\n      isTeamLead: false,\n      isUser: false,\n      teamsArr: [],\n      expandRoleForm: false,\n      expandCreateForm: false,\n      expandExpensesForm: false,\n    };\n  },\n  created() {\n    this.setPageByRoles();\n    this.getTeams();\n  },\n  computed: {\n    allTeamsAndProjects() {\n      let arr = {};\n      const arr2 = [];\n      const arr3 = [];\n      for (const team of this.teamsArr) {\n        let project = {\n          teamName: team.teamName,\n          teamBudget: team.teamBudget,\n          projects: team.projects,\n          teamlead: team.teamlead,\n        };\n        arr2.push(project);\n        if (team.projects.length) {\n          for (const project of team.projects) {\n            arr3.push(project);\n          }\n        }\n      }\n      arr = {\n        teamsWithProjects: arr2,\n        onlyProjecsts: arr3,\n      };\n      return arr;\n    },\n    rights() {\n      let rights;\n      if (this.isAdmin) {\n        rights = \"Admin\";\n      } else if (this.isTeamLead) {\n        rights = \"Team Lead\";\n      } else if (this.isUser) {\n        rights = \"User\";\n      }\n      return rights;\n    },\n  },\n  methods: {\n    setPageByRoles() {\n      db.collection(\"users\")\n        .get()\n        .then((query) => {\n          const users = [];\n          query.forEach((doc) => {\n            const data = doc.data();\n            users.push({\n              data,\n            });\n            for (const user of users) {\n              if (user.data.user === store.currentUser) {\n                if (user.data.isAdmin) {\n                  this.isAdmin = true;\n                } else if (user.data.isTeamLead) {\n                  this.isTeamLead = true;\n                } else {\n                  this.isUser = true;\n                }\n              }\n            }\n          });\n        });\n    },\n    async getTeams() {\n      db.collection(\"teams\")\n        .get()\n        .then((query) => {\n          this.teamsArr = [];\n          query.forEach((doc) => {\n            const data = doc.data();\n            this.teamsArr.push({\n              teamName: data.name,\n              teamBudget: data.budget,\n              teamlead: data.teamlead,\n              projects: data.projects,\n            });\n          });\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\ndiv {\n  padding: 10px;\n  font-size: 18px;\n  cursor: pointer;\n}\n\n.box {\n  width: 33%;\n  padding: 10px;\n  border-radius: 10px;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: center;\n}\n\n.boxes {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n}\n\n.flex {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n}\n\n.expanded {\n  background-color: lightgray;\n}\n\n.button {\n  width: 20%;\n  background-color: white;\n  font-weight: bold;\n  border: none;\n  border-radius: 10px;\n}\n\n.button {\n  &:hover {\n    background-color: lightgray;\n    &::after {\n      content: \"\";\n      display: block;\n      width: 20%;\n      margin: 0 auto;\n      height: 3px;\n      background-color: lightgray;\n    }\n  }\n  &:focus {\n    outline: none;\n  }\n}\n\n.clicked {\n  &::after {\n    content: \"\";\n    display: block;\n    width: 20%;\n    margin: 0 auto;\n    height: 3px;\n    background-color: rgba(250, 64, 64, 0.596);\n  }\n}\n</style>"]}]}