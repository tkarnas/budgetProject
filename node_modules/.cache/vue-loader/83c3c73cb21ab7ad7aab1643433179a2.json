{"remainingRequest":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tomis\\Desktop\\vue-diplomski\\src\\components\\RoleForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\src\\components\\RoleForm.vue","mtime":1675890592626},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675708577019},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\babel-loader\\lib\\index.js","mtime":1675708563485},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675708577019},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\vue-loader\\lib\\index.js","mtime":1675708908543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkYiwgZmlyZWJhc2UgfSBmcm9tICJAL2ZpcmViYXNlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUm9sZUZvcm0iLA0KICBwcm9wczogWyJpc0FkbWluIiwgImFsbFRlYW1zQW5kUHJvamVjdHMiLCAicmlnaHRzIl0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXI6ICIiLA0KICAgICAgcm9sZTogIiIsDQogICAgICB1c2VyUHJvamVjdDogIiIsDQogICAgICBhbGxVc2Vyc0FycjogW10sDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmZldGNoQWxsVXNlcnMoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFRlYW1zKCkgew0KICAgICAgdGhpcy4kZW1pdCgiY2FsbC1nZXQtdGVhbXMiKTsNCiAgICB9LA0KICAgIHNldFJvbGUoKSB7DQogICAgICBpZiAoIXRoaXMudXNlciB8fCAhdGhpcy5yb2xlKSB7DQogICAgICAgIHRoaXMuJGFsZXJ0KCJGaWVsZHMgY2FudCBiZSBlbXB0eSEiLCAiV2FybmluZyIsICJ3YXJuaW5nIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLnVzZXI7DQoNCiAgICAgIGNvbnN0IHJvbGVNYXAgPSB7DQogICAgICAgIGlzQWRtaW46IHsgaXNBZG1pbjogdHJ1ZSB9LA0KICAgICAgICBpc1RlYW1MZWFkOiB7IGlzVGVhbUxlYWQ6IHRydWUgfSwNCiAgICAgICAgZGVmYXVsdDogeyBpc1VzZXI6IHRydWUgfSwNCiAgICAgIH07DQoNCiAgICAgIGxldCBmb3VuZDsNCiAgICAgIGZvciAoY29uc3QgY2hlY2tVc2VyIG9mIHRoaXMuYWxsVXNlcnNBcnIpIHsNCiAgICAgICAgaWYgKGNoZWNrVXNlciA9PT0gdXNlcikgew0KICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAvLyB0aGlzLiRhbGVydCgiVGhpcyB1c2VyIGFscmVhZHkgZXhpc3RzISIsICJXYXJuaW5nIiwgIndhcm5pbmciKTsNCiAgICAgICAgICAvLyByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBpZiAoZm91bmQpIHsNCiAgICAgICAgZGIuY29sbGVjdGlvbigidXNlcnMiKQ0KICAgICAgICAgIC5nZXQoKQ0KICAgICAgICAgIC50aGVuKChxdWVyeSkgPT4gew0KICAgICAgICAgICAgcXVlcnkuZm9yRWFjaCgoZG9jKSA9PiB7DQogICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpOw0KICAgICAgICAgICAgICBpZiAodXNlciA9PT0gZGF0YS51c2VyKSB7DQogICAgICAgICAgICAgICAgbGV0IHByZXZpb3VzUm9sZSA9ICJpc1VzZXIiOw0KICAgICAgICAgICAgICAgIGlmIChkYXRhLmlzQWRtaW4pIHsNCiAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm9sZSA9ICJpc0FkbWluIjsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuaXNUZWFtTGVhZCkgew0KICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb2xlID0gImlzVGVhbUxlYWQiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSBkb2MuaWQ7DQogICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbigidXNlcnMiKQ0KICAgICAgICAgICAgICAgICAgLmRvYyh1c2VySWQpDQogICAgICAgICAgICAgICAgICAudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgW3ByZXZpb3VzUm9sZV06IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLmRlbGV0ZSgpLA0KICAgICAgICAgICAgICAgICAgICBbdGhpcy5yb2xlXTogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgdXNlcjogdGhpcy51c2VyLA0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb2xlID09PSAiaXNUZWFtTGVhZCIpIHsNCiAgICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRlYW1zIikNCiAgICAgICAgICAgICAgICAgICAgLndoZXJlKCJuYW1lIiwgIj09IiwgdGhpcy51c2VyUHJvamVjdC50ZWFtTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgLndoZXJlKCJidWRnZXQiLCAiPT0iLCB0aGlzLnVzZXJQcm9qZWN0LnRlYW1CdWRnZXQpDQogICAgICAgICAgICAgICAgICAgIC5nZXQoKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZW1wdHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZWFtSWQgPSBkb2MuaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ0ZWFtcyIpDQogICAgICAgICAgICAgICAgICAgICAgICAgIC5kb2ModGVhbUlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWFtbGVhZDogdGhpcy51c2VyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoIkFkZGVkIiwgIlN1Y2Nlc3MiLCAic3VjY2VzcyIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUZWFtcygpDQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgcHJvamVjdDoiLCBlcnJvcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgZ2V0dGluZyB0ZWFtOiIsIGVycm9yKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCByb2xlID0gcm9sZU1hcFt0aGlzLnJvbGVdIHx8IHJvbGVNYXAuZGVmYXVsdDsNCiAgICAgICAgaWYgKHRoaXMucm9sZSA9PT0gImlzVXNlciIpIHsNCiAgICAgICAgICBmb3IgKGNvbnN0IHRlYW0gb2YgdGhpcy5hbGxUZWFtc0FuZFByb2plY3RzLnRlYW1zV2l0aFByb2plY3RzKSB7DQogICAgICAgICAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgdGVhbS5wcm9qZWN0cykgew0KICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgcHJvamVjdC5wcm9qZWN0TmFtZSA9PT0gdGhpcy51c2VyUHJvamVjdC5wcm9qZWN0TmFtZSAmJg0KICAgICAgICAgICAgICAgIHByb2plY3QucHJvamVjdEJ1ZGdldCA9PT0gdGhpcy51c2VyUHJvamVjdC5wcm9qZWN0QnVkZ2V0DQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRlYW1zIikNCiAgICAgICAgICAgICAgICAgIC5nZXQoKQ0KICAgICAgICAgICAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5lbXB0eSkgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiZXJyb3IiKTsNCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVhbSA9IGRvYy5kYXRhKCk7DQogICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVhbUlkID0gZG9jLmlkOw0KICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiB0ZWFtLnByb2plY3RzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3QucHJvamVjdE5hbWUgPT09DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyUHJvamVjdC5wcm9qZWN0TmFtZSAmJg0KICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0LnByb2plY3RCdWRnZXQgPT09DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyUHJvamVjdC5wcm9qZWN0QnVkZ2V0DQogICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvamVjdEluZGV4ID0gdGVhbS5wcm9qZWN0cy5pbmRleE9mKHByb2plY3QpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRlYW1zIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZG9jKHRlYW1JZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZG9jKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVGVhbSA9IGRvYy5kYXRhKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGVhbS5wcm9qZWN0c1twcm9qZWN0SW5kZXhdLnBlb3BsZS5wdXNoKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ0ZWFtcyIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kb2ModGVhbUlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0KHVwZGF0ZWRUZWFtKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoIkFkZGVkIiwgIlN1Y2Nlc3MiLCAic3VjY2VzcyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRlYW1zKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5yb2xlID09PSAiaXNUZWFtTGVhZCIpIHsNCiAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ0ZWFtcyIpDQogICAgICAgICAgICAud2hlcmUoIm5hbWUiLCAiPT0iLCB0aGlzLnVzZXJQcm9qZWN0LnRlYW1OYW1lKQ0KICAgICAgICAgICAgLndoZXJlKCJidWRnZXQiLCAiPT0iLCB0aGlzLnVzZXJQcm9qZWN0LnRlYW1CdWRnZXQpDQogICAgICAgICAgICAuZ2V0KCkNCiAgICAgICAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4gew0KICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZW1wdHkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgdGVhbUlkID0gZG9jLmlkOw0KICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRlYW1zIikNCiAgICAgICAgICAgICAgICAgIC5kb2ModGVhbUlkKQ0KICAgICAgICAgICAgICAgICAgLnVwZGF0ZSh7DQogICAgICAgICAgICAgICAgICAgIHRlYW1sZWFkOiB0aGlzLnVzZXIsDQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gDQogICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGFsZXJ0KCJBZGRlZCIsICJTdWNjZXNzIiwgInN1Y2Nlc3MiKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRlYW1zKCkNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFkZGluZyBwcm9qZWN0OiIsIGVycm9yKTsNCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGdldHRpbmcgdGVhbToiLCBlcnJvcik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpDQogICAgICAgICAgLmFkZCh7IHVzZXI6IHRoaXMudXNlciwgLi4ucm9sZSB9KQ0KICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJvbGVNYXAgPSB7DQogICAgICAgICAgICAgIGlzQWRtaW46ICJhZG1pbiIsDQogICAgICAgICAgICAgIGlzVGVhbUxlYWQ6ICJ0ZWFtbGVhZCIsDQogICAgICAgICAgICAgIGRlZmF1bHQ6ICJ1c2VyIiwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBjb25zdCByb2xhID0gcm9sZU1hcFt0aGlzLnJvbGVdIHx8IHJvbGVNYXAuZGVmYXVsdDsNCiAgICAgICAgICAgIHRoaXMuJGFsZXJ0KA0KICAgICAgICAgICAgICBgVXNlciAke3RoaXMudXNlcn0gaXMgc2V0IGFzICR7cm9sYX1gLA0KICAgICAgICAgICAgICAiU3VjY2VzcyIsDQogICAgICAgICAgICAgICJzdWNjZXNzIg0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIHRoaXMudXNlciA9ICIiOw0KICAgICAgICAgICAgdGhpcy5yb2xlID0gIiI7DQogICAgICAgICAgICB0aGlzLmdldFRlYW1zKCk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRhbGVydChlcnJvciwgIkVycm9yIiwgImVycm9yIik7DQogICAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBmZXRjaEFsbFVzZXJzKCkgew0KICAgICAgZGIuY29sbGVjdGlvbigidXNlcnMiKQ0KICAgICAgICAuZ2V0KCkNCiAgICAgICAgLnRoZW4oKHF1ZXJ5KSA9PiB7DQogICAgICAgICAgcXVlcnkuZm9yRWFjaCgoZG9jKSA9PiB7DQogICAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTsNCiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBkYXRhLnVzZXI7DQogICAgICAgICAgICB0aGlzLmFsbFVzZXJzQXJyLnB1c2godXNlcik7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["RoleForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoleForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"flex\">\r\n    <div class=\"form-group\" v-if=\"isAdmin\">\r\n      <h1>Set roles for users</h1>\r\n      <form class=\"form-group border\">\r\n        <label for=\"select-field\">Select role</label>\r\n        <select id=\"select-field\" v-model=\"role\">\r\n          <option value=\"isAdmin\">Admin</option>\r\n          <option value=\"isTeamLead\">Teamlead</option>\r\n          <option value=\"isUser\">User</option>\r\n        </select>\r\n        <div\r\n          v-if=\"role === 'isUser' && allTeamsAndProjects.onlyProjecsts.length\"\r\n        >\r\n          <div>Add this user to project</div>\r\n          <select id=\"select-field\" v-model=\"userProject\">\r\n            <option\r\n              v-for=\"(project, index) in allTeamsAndProjects.onlyProjecsts\"\r\n              :key=\"index\"\r\n              :value=\"project\"\r\n            >\r\n              {{ project.projectName }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div\r\n          v-if=\"\r\n            role === 'isTeamLead' &&\r\n            allTeamsAndProjects.teamsWithProjects.length\r\n          \"\r\n        >\r\n          <div>Add this team lead to team</div>\r\n          <select id=\"select-field\" v-model=\"userProject\">\r\n            <option\r\n              v-for=\"(team, index) in allTeamsAndProjects.teamsWithProjects\"\r\n              :key=\"index\"\r\n              :value=\"team\"\r\n            >\r\n              {{ team.teamName }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <label for=\"reason-field\">Select user</label>\r\n        <select id=\"select-field\" v-model=\"user\">\r\n          <option\r\n            v-for=\"(user, index) in allUsersArr\"\r\n            :key=\"index\"\r\n            :value=\"user\"\r\n          >\r\n            {{ user }}\r\n          </option>\r\n        </select>\r\n        <div\r\n          class=\"blue-button\"\r\n          style=\"margin-top: 10px\"\r\n          @click=\"setRole(user, role, userProject)\"\r\n        >\r\n          Submit\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { db, firebase } from \"@/firebase\";\r\n\r\nexport default {\r\n  name: \"RoleForm\",\r\n  props: [\"isAdmin\", \"allTeamsAndProjects\", \"rights\"],\r\n  data() {\r\n    return {\r\n      user: \"\",\r\n      role: \"\",\r\n      userProject: \"\",\r\n      allUsersArr: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchAllUsers();\r\n  },\r\n  methods: {\r\n    getTeams() {\r\n      this.$emit(\"call-get-teams\");\r\n    },\r\n    setRole() {\r\n      if (!this.user || !this.role) {\r\n        this.$alert(\"Fields cant be empty!\", \"Warning\", \"warning\");\r\n        return;\r\n      }\r\n      const user = this.user;\r\n\r\n      const roleMap = {\r\n        isAdmin: { isAdmin: true },\r\n        isTeamLead: { isTeamLead: true },\r\n        default: { isUser: true },\r\n      };\r\n\r\n      let found;\r\n      for (const checkUser of this.allUsersArr) {\r\n        if (checkUser === user) {\r\n          found = true;\r\n          // this.$alert(\"This user already exists!\", \"Warning\", \"warning\");\r\n          // return\r\n        }\r\n      }\r\n\r\n      if (found) {\r\n        db.collection(\"users\")\r\n          .get()\r\n          .then((query) => {\r\n            query.forEach((doc) => {\r\n              const data = doc.data();\r\n              if (user === data.user) {\r\n                let previousRole = \"isUser\";\r\n                if (data.isAdmin) {\r\n                  previousRole = \"isAdmin\";\r\n                } else if (data.isTeamLead) {\r\n                  previousRole = \"isTeamLead\";\r\n                }\r\n                const userId = doc.id;\r\n                db.collection(\"users\")\r\n                  .doc(userId)\r\n                  .update({\r\n                    [previousRole]: firebase.firestore.FieldValue.delete(),\r\n                    [this.role]: true,\r\n                    user: this.user,\r\n                  });\r\n                  if (this.role === \"isTeamLead\") {\r\n                  db.collection(\"teams\")\r\n                    .where(\"name\", \"==\", this.userProject.teamName)\r\n                    .where(\"budget\", \"==\", this.userProject.teamBudget)\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                      if (snapshot.empty) {\r\n                        return;\r\n                      }\r\n                      snapshot.forEach((doc) => {\r\n                        const teamId = doc.id;\r\n                        db.collection(\"teams\")\r\n                          .doc(teamId)\r\n                          .update({\r\n                            teamlead: this.user,\r\n                          })\r\n                          .then(() => {\r\n                            this.$alert(\"Added\", \"Success\", \"success\")\r\n                            this.getTeams()\r\n                          })\r\n                          .catch((error) => {\r\n                            console.error(\"Error adding project:\", error);\r\n                          });\r\n                      });\r\n                    })\r\n                    .catch((error) => {\r\n                      console.error(\"Error getting team:\", error);\r\n                    });\r\n                  }\r\n                }\r\n            });\r\n          });\r\n      } else {\r\n        const role = roleMap[this.role] || roleMap.default;\r\n        if (this.role === \"isUser\") {\r\n          for (const team of this.allTeamsAndProjects.teamsWithProjects) {\r\n            for (const project of team.projects) {\r\n              if (\r\n                project.projectName === this.userProject.projectName &&\r\n                project.projectBudget === this.userProject.projectBudget\r\n              ) {\r\n                db.collection(\"teams\")\r\n                  .get()\r\n                  .then((snapshot) => {\r\n                    if (snapshot.empty) {\r\n                      console.warn(\"error\");\r\n                      return;\r\n                    }\r\n                    snapshot.forEach((doc) => {\r\n                      const team = doc.data();\r\n                      const teamId = doc.id;\r\n                      for (const project of team.projects) {\r\n                        if (\r\n                          project.projectName ===\r\n                            this.userProject.projectName &&\r\n                          project.projectBudget ===\r\n                            this.userProject.projectBudget\r\n                        ) {\r\n                          const projectIndex = team.projects.indexOf(project);\r\n\r\n                          db.collection(\"teams\")\r\n                            .doc(teamId)\r\n                            .get()\r\n                            .then((doc) => {\r\n                              const updatedTeam = doc.data();\r\n                              updatedTeam.projects[projectIndex].people.push(\r\n                                user\r\n                              );\r\n\r\n                              db.collection(\"teams\")\r\n                                .doc(teamId)\r\n                                .set(updatedTeam);\r\n                                this.$alert(\"Added\", \"Success\", \"success\");\r\n                                this.getTeams()\r\n                            });\r\n                        }\r\n                      }\r\n                    });\r\n                  });\r\n              }\r\n            }\r\n          }\r\n        } else if (this.role === \"isTeamLead\") {\r\n          db.collection(\"teams\")\r\n            .where(\"name\", \"==\", this.userProject.teamName)\r\n            .where(\"budget\", \"==\", this.userProject.teamBudget)\r\n            .get()\r\n            .then((snapshot) => {\r\n              if (snapshot.empty) {\r\n                return;\r\n              }\r\n              snapshot.forEach((doc) => {\r\n                const teamId = doc.id;\r\n                db.collection(\"teams\")\r\n                  .doc(teamId)\r\n                  .update({\r\n                    teamlead: this.user,\r\n                  })\r\n                  .then(() => \r\n                  {\r\n                    this.$alert(\"Added\", \"Success\", \"success\")\r\n                    this.getTeams()\r\n                  })\r\n                  .catch((error) => {\r\n                    console.error(\"Error adding project:\", error);\r\n                  });\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              console.error(\"Error getting team:\", error);\r\n            });\r\n        }\r\n        db.collection(\"users\")\r\n          .add({ user: this.user, ...role })\r\n          .then(() => {\r\n            const roleMap = {\r\n              isAdmin: \"admin\",\r\n              isTeamLead: \"teamlead\",\r\n              default: \"user\",\r\n            };\r\n            const rola = roleMap[this.role] || roleMap.default;\r\n            this.$alert(\r\n              `User ${this.user} is set as ${rola}`,\r\n              \"Success\",\r\n              \"success\"\r\n            );\r\n            this.user = \"\";\r\n            this.role = \"\";\r\n            this.getTeams();\r\n          })\r\n          .catch((error) => {\r\n            this.$alert(error, \"Error\", \"error\");\r\n          });\r\n      }\r\n    },\r\n    fetchAllUsers() {\r\n      db.collection(\"users\")\r\n        .get()\r\n        .then((query) => {\r\n          query.forEach((doc) => {\r\n            const data = doc.data();\r\n            const user = data.user;\r\n            this.allUsersArr.push(user);\r\n          });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.blue-button {\r\n  display: block;\r\n  width: 40%;\r\n  padding: 10px 0;\r\n  text-align: center;\r\n  background-color: rgba(41, 133, 133, 0.3);\r\n  color: white;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  border: 1px solid black;\r\n}\r\n\r\n.border {\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  height: 100%;\r\n  padding: 10px;\r\n  margin: 10px;\r\n  background-color: rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.flex {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-content: center;\r\n  justify-content: center;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 97%;\r\n  width: 80%;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  font-weight: bold;\r\n  margin: 0px 20px;\r\n}\r\n\r\n.form-group input {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\n\r\n.form-group select {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\n</style>"]}]}