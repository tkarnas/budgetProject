{"remainingRequest":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tomo/Documents/projects/vue-diplomski/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tomo/Documents/projects/vue-diplomski/src/App.vue","mtime":1680948623761},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/cache-loader/dist/cjs.js","mtime":1680948621095},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/thread-loader/dist/cjs.js","mtime":1680948623124},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/babel-loader/lib/index.js","mtime":1680948621002},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/cache-loader/dist/cjs.js","mtime":1680948621095},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/vue-loader/lib/index.js","mtime":1680948623381}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlLmpzIjsKaW1wb3J0IHsgZmlyZWJhc2UgfSBmcm9tICJAL2ZpcmViYXNlLmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCB7IGRiIH0gZnJvbSAiQC9maXJlYmFzZSI7CgpmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKCh1c2VyKSA9PiB7CiAgY29uc3QgY3VycmVudFJvdXRlID0gcm91dGVyLmN1cnJlbnRSb3V0ZTsKICBpZiAodXNlcikgewogICAgc3RvcmUuY3VycmVudFVzZXIgPSB1c2VyLmVtYWlsOwogICAgaWYgKCFjdXJyZW50Um91dGUubWV0YS5uZWVkc1VzZXIpIHsKICAgICAgcm91dGVyLnB1c2goeyBuYW1lOiAiSG9tZSIgfSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHN0b3JlLmN1cnJlbnRVc2VyID0gbnVsbDsKICAgIGlmIChjdXJyZW50Um91dGUubWV0YS5uZWVkc1VzZXIpIHsKICAgICAgcm91dGVyLnB1c2goeyBuYW1lOiAiTG9naW4iIH0pOwogICAgfQogIH0KfSk7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiBzdG9yZTsKICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICBjb25zdCB1c2Vyc1JlZiA9IGRiLmNvbGxlY3Rpb24oInVzZXJzIik7CiAgICB1c2Vyc1JlZi5vblNuYXBzaG90KChzbmFwc2hvdCkgPT4gewogICAgICBzbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICBjb25zdCB1c2VyID0gZG9jLmRhdGEoKTsKICAgICAgICBjb25zdCB1c2VyUm9sZSA9IGRvYy5kYXRhKCk7CiAgICAgICAgaWYgKHN0b3JlLmN1cnJlbnRVc2VyID09PSB1c2VyLnVzZXIpIHsKICAgICAgICAgIGxldCB1c2VyUm9sYTsKICAgICAgICAgIGlmICh1c2VyUm9sZS5pc0FkbWluKSB7CiAgICAgICAgICAgIHVzZXJSb2xhID0gImFkbWluIjsKICAgICAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUuaXNUZWFtTGVhZCkgewogICAgICAgICAgICB1c2VyUm9sYSA9ICJ0ZWFtbGVhZCI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1c2VyUm9sYSA9ICJ1c2VyIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dvdXQoKSB7CiAgICAgIGZpcmViYXNlCiAgICAgICAgLmF1dGgoKQogICAgICAgIC5zaWduT3V0KCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJMb2dpbiIgfSk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <nav id=\"nav\" class=\"navbar navbar-expand-lg navbar-light\">\n      <a class=\"navbar-brand\" href=\"/\"> </a>\n      <button\n        class=\"navbar-toggler\"\n        type=\"button\"\n        data-toggle=\"collapse\"\n        data-target=\"#navbarSupportedContent\"\n        aria-controls=\"navbarSupportedContent\"\n        aria-expanded=\"false\"\n      >\n        <span class=\"navbar-toggler-icon\" ref_testcafe=\"hamburgerMenu\"></span>\n      </button>\n      <div class=\"flex collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul class=\"flex navbar-nav mr-auto\">\n          <li v-if=\"!currentUser\" class=\"nav-item\" ref_testcafe=\"login\">\n            <router-link class=\"nav-link\" to=\"/login\">Login</router-link>\n          </li>\n          <li v-if=\"!currentUser\" class=\"nav-item\" ref_testcafe=\"register\">\n            <router-link class=\"nav-link\" to=\"/signup\">Signup</router-link>\n          </li>\n          <li v-if=\"currentUser\" class=\"nav-item\">\n            <a href=\"#\" @click.prevent=\"logout()\" class=\"nav-link\" ref_testcafe=\"logoutButton\">Logout</a>\n          </li>\n        </ul>\n      </div>\n    </nav>\n    <router-view />\n  </div>\n</template>\n\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  display: flex;\n  flex-direction: column;\n  margin-left: 10px;\n}\n\n.flex {\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  align-items: flex-end;\n  justify-content: flex-end;\n}\n\n#nav {\n  padding: 30px;\n\n  a {\n    font-weight: bold;\n    color: #2c3e50;\n    background-color: white !important;\n\n    &.router-link-exact-active {\n      color: #42b983;\n    }\n  }\n}\n</style>\n\n<script>\nimport store from \"@/store.js\";\nimport { firebase } from \"@/firebase.js\";\nimport router from \"@/router\";\nimport { db } from \"@/firebase\";\n\nfirebase.auth().onAuthStateChanged((user) => {\n  const currentRoute = router.currentRoute;\n  if (user) {\n    store.currentUser = user.email;\n    if (!currentRoute.meta.needsUser) {\n      router.push({ name: \"Home\" });\n    }\n  } else {\n    store.currentUser = null;\n    if (currentRoute.meta.needsUser) {\n      router.push({ name: \"Login\" });\n    }\n  }\n});\n\nexport default {\n  data() {\n    return store;\n  },\n  async created() {\n    const usersRef = db.collection(\"users\");\n    usersRef.onSnapshot((snapshot) => {\n      snapshot.forEach((doc) => {\n        const user = doc.data();\n        const userRole = doc.data();\n        if (store.currentUser === user.user) {\n          let userRola;\n          if (userRole.isAdmin) {\n            userRola = \"admin\";\n          } else if (userRole.isTeamLead) {\n            userRola = \"teamlead\";\n          } else {\n            userRola = \"user\";\n          }\n        }\n      });\n    });\n  },\n  methods: {\n    logout() {\n      firebase\n        .auth()\n        .signOut()\n        .then(() => {\n          this.$router.push({ name: \"Login\" });\n        });\n    },\n  },\n};\n</script>\n"]}]}