{"remainingRequest":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/thread-loader/dist/cjs.js!/Users/tomo/Documents/projects/vue-diplomski/node_modules/babel-loader/lib/index.js!/Users/tomo/Documents/projects/vue-diplomski/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/tomo/Documents/projects/vue-diplomski/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tomo/Documents/projects/vue-diplomski/src/components/ExpensesForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tomo/Documents/projects/vue-diplomski/src/components/ExpensesForm.vue","mtime":1680948623761},{"path":"/Users/tomo/Documents/projects/vue-diplomski/babel.config.js","mtime":1680948619828},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/cache-loader/dist/cjs.js","mtime":1680948621095},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/thread-loader/dist/cjs.js","mtime":1680948623124},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/babel-loader/lib/index.js","mtime":1680948621002},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/cache-loader/dist/cjs.js","mtime":1680948621095},{"path":"/Users/tomo/Documents/projects/vue-diplomski/node_modules/vue-loader/lib/index.js","mtime":1680948623381}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy90b21vL0RvY3VtZW50cy9wcm9qZWN0cy92dWUtZGlwbG9tc2tpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90b21vL0RvY3VtZW50cy9wcm9qZWN0cy92dWUtZGlwbG9tc2tpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBkYiwgZmlyZWJhc2UgfSBmcm9tICJAL2ZpcmViYXNlIjsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUuanMiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUm9sZUZvcm0iLAogIHByb3BzOiBbImlzQWRtaW4iLCAiaXNUZWFtTGVhZCIsICJpc1VzZXIiLCAiYWxsVGVhbXNBbmRQcm9qZWN0cyIsICJyaWdodHMiXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0ZWRQcm9qZWN0OiBudWxsLAogICAgICBudW1iZXJWYWx1ZTogbnVsbCwKICAgICAgcmVhc29uOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRlYW1zOiBmdW5jdGlvbiBnZXRUZWFtcygpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FsbC1nZXQtdGVhbXMiKTsKICAgIH0sCiAgICBhZGRFeHBlbnNlczogZnVuY3Rpb24gYWRkRXhwZW5zZXMoYWxsVGVhbXNBbmRQcm9qZWN0cywgc2VsZWN0ZWRQcm9qZWN0LCBudW1iZXJWYWx1ZSwgcmVhc29uKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB0ZWFtLCBwcm9qZWN0LCBzcGVudE1vbmV5LCBfaXRlcmF0b3IsIF9zdGVwLCBleHBlbnNlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIShwYXJzZUludChudW1iZXJWYWx1ZSwgMTApIDwgMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLiRhbGVydCgiQ2Fubm90IGlucHV0IG5lZ2F0aXZlIG51bWJlcnMuIiwgIldhcm5pbmciLCAid2FybmluZyIpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpZiAoISghc2VsZWN0ZWRQcm9qZWN0IHx8ICFudW1iZXJWYWx1ZSB8fCByZWFzb24gPT09ICIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuJGFsZXJ0KCJGaWVsZHMgY2Fubm90IGJlIGVtcHR5LiIsICJXYXJuaW5nIiwgIndhcm5pbmciKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgdGVhbSA9IGFsbFRlYW1zQW5kUHJvamVjdHMudGVhbXNXaXRoUHJvamVjdHMuZmluZChmdW5jdGlvbiAodGVhbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdGVhbS5wcm9qZWN0cy5zb21lKGZ1bmN0aW9uIChwcm9qZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2plY3QucHJvamVjdE5hbWUgPT09IHNlbGVjdGVkUHJvamVjdC5wcm9qZWN0TmFtZSAmJiBwcm9qZWN0LnByb2plY3RCdWRnZXQgPT09IHNlbGVjdGVkUHJvamVjdC5wcm9qZWN0QnVkZ2V0OwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICh0ZWFtKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgcHJvamVjdCA9IHRlYW0ucHJvamVjdHMuZmluZChmdW5jdGlvbiAocHJvamVjdCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcHJvamVjdC5wcm9qZWN0TmFtZSA9PT0gc2VsZWN0ZWRQcm9qZWN0LnByb2plY3ROYW1lICYmIHByb2plY3QucHJvamVjdEJ1ZGdldCA9PT0gc2VsZWN0ZWRQcm9qZWN0LnByb2plY3RCdWRnZXQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAocHJvamVjdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgaWYgKCEocGFyc2VJbnQobnVtYmVyVmFsdWUsIDEwKSA+IHByb2plY3QucHJvamVjdEJ1ZGdldCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy4kYWxlcnQoIk51bWJlciB0b28gbGFyZ2UuIiwgIldhcm5pbmciLCAid2FybmluZyIpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgc3BlbnRNb25leSA9IDA7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihwcm9qZWN0LmV4cGVuc2VzKTsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgIGV4cGVuc2UgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBzcGVudE1vbmV5ICs9IGV4cGVuc2UuYW1vdW50OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoc3BlbnRNb25leSArIHBhcnNlSW50KG51bWJlclZhbHVlLCAxMCkgPiBwcm9qZWN0LnByb2plY3RCdWRnZXQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuJGFsZXJ0KCJJbnN1ZmZpY2llbnQgZnVuZHMuIiwgIldhcm5pbmciLCAid2FybmluZyIpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbigidGVhbXMiKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZW1wdHkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oImVycm9yIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgdGVhbUlkOwogICAgICAgICAgICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVhbUZyb21EQiA9IGRvYy5kYXRhKCk7CgogICAgICAgICAgICAgICAgICAgIGlmICh0ZWFtRnJvbURCLm5hbWUgPT09IHRlYW0udGVhbU5hbWUgJiYgdGVhbUZyb21EQi5idWRnZXQgPT09IHRlYW0udGVhbUJ1ZGdldCkgewogICAgICAgICAgICAgICAgICAgICAgdGVhbUlkID0gZG9jLmlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0SW5kZXggPSB0ZWFtLnByb2plY3RzLmluZGV4T2YocHJvamVjdCk7CiAgICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRlYW1zIikuZG9jKHRlYW1JZCkuZ2V0KCkudGhlbihmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRUZWFtID0gZG9jLmRhdGEoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGltZSA9IG1vbWVudCgpLmZvcm1hdCgiREQgTU0gWVlZWSIpOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUZWFtLnByb2plY3RzW3Byb2plY3RJbmRleF0uZXhwZW5zZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHBhcnNlSW50KG51bWJlclZhbHVlLCAxMCksCiAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHJlYXNvbiwKICAgICAgICAgICAgICAgICAgICAgIG1vbWVudDogdGltZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRlYW1zIikuZG9jKHRlYW1JZCkuc2V0KHVwZGF0ZWRUZWFtKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0VGVhbXMoKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGFsZXJ0KCJFeHBlbnNlIGFkZGVkIiwgIlN1Y2Nlc3MiLCAic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRQcm9qZWN0ID0gbnVsbDsKICAgICAgICAgICAgICAgIF90aGlzLm51bWJlclZhbHVlID0gbnVsbDsKICAgICAgICAgICAgICAgIF90aGlzLnJlYXNvbiA9ICIiOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNpZ25lZFVzZXI6IGZ1bmN0aW9uIHNpZ25lZFVzZXIoKSB7CiAgICAgIHJldHVybiBzdG9yZS5jdXJyZW50VXNlcjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["ExpensesForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"flex\" v-if=\"isAdmin || isTeamLead\">\r\n    <div class=\"form-group\">\r\n      <h1>Add expenses</h1>\r\n      <form class=\"form-group border\">\r\n        <label for=\"select-field\">Select Project:</label>\r\n        <select id=\"select-field\" v-model=\"selectedProject\">\r\n          <option\r\n            v-for=\"(team, index) in allTeamsAndProjects.onlyProjecsts\"\r\n            :key=\"index\"\r\n            :value=\"team\"\r\n          >\r\n            {{ team.projectName }}\r\n          </option>\r\n        </select>\r\n        <label style=\"margin-top: 20px\" for=\"number-field\">Money spent:</label>\r\n        <input type=\"number\" id=\"number-field\" v-model=\"numberValue\" />\r\n        <label style=\"margin-top: 20px\" for=\"reason-field\">Reason:</label>\r\n        <input type=\"text\" id=\"reason-field\" v-model=\"reason\" />\r\n        <div\r\n          class=\"blue-button\"\r\n          style=\"margin-top: 10px\"\r\n          @click=\"\r\n            addExpenses(\r\n              allTeamsAndProjects,\r\n              selectedProject,\r\n              numberValue,\r\n              reason\r\n            )\r\n          \"\r\n        >\r\n          Submit\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { db, firebase } from \"@/firebase\";\r\nimport store from \"@/store.js\";\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  name: \"RoleForm\",\r\n  props: [\"isAdmin\", \"isTeamLead\", \"isUser\", \"allTeamsAndProjects\", \"rights\"],\r\n  data() {\r\n    return {\r\n      selectedProject: null,\r\n      numberValue: null,\r\n      reason: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    getTeams() {\r\n      this.$emit(\"call-get-teams\");\r\n    },\r\n    async addExpenses(\r\n      allTeamsAndProjects,\r\n      selectedProject,\r\n      numberValue,\r\n      reason\r\n    ) {\r\n      if (parseInt(numberValue, 10) < 0) {\r\n        this.$alert(\"Cannot input negative numbers.\", \"Warning\", \"warning\");\r\n        return;\r\n      }\r\n      if (!selectedProject || !numberValue || reason === \"\") {\r\n        this.$alert(\"Fields cannot be empty.\", \"Warning\", \"warning\");\r\n        return;\r\n      }\r\n\r\n      const team = allTeamsAndProjects.teamsWithProjects.find((team) =>\r\n        team.projects.some(\r\n          (project) =>\r\n            project.projectName === selectedProject.projectName &&\r\n            project.projectBudget === selectedProject.projectBudget\r\n        )\r\n      );\r\n\r\n      if (!team) {\r\n        return;\r\n      }\r\n\r\n      const project = team.projects.find(\r\n        (project) =>\r\n          project.projectName === selectedProject.projectName &&\r\n          project.projectBudget === selectedProject.projectBudget\r\n      );\r\n\r\n      if (!project) {\r\n        return;\r\n      }\r\n\r\n      if (parseInt(numberValue, 10) > project.projectBudget) {\r\n        this.$alert(\"Number too large.\", \"Warning\", \"warning\");\r\n        return;\r\n      }\r\n\r\n      let spentMoney = 0;\r\n      for (const expense of project.expenses) {\r\n        spentMoney += expense.amount;\r\n      }\r\n\r\n      if (spentMoney + parseInt(numberValue, 10) > project.projectBudget) {\r\n        this.$alert(\"Insufficient funds.\", \"Warning\", \"warning\");\r\n        return;\r\n      }\r\n\r\n      db.collection(\"teams\")\r\n        .get()\r\n        .then((snapshot) => {\r\n          if (snapshot.empty) {\r\n            console.warn(\"error\");\r\n            return;\r\n          }\r\n          let teamId;\r\n          snapshot.forEach((doc) => {\r\n            const teamFromDB = doc.data();\r\n            if (\r\n              teamFromDB.name === team.teamName &&\r\n              teamFromDB.budget === team.teamBudget\r\n            ) {\r\n              teamId = doc.id;\r\n            }\r\n          });\r\n          const projectIndex = team.projects.indexOf(project);\r\n          db.collection(\"teams\")\r\n            .doc(teamId)\r\n            .get()\r\n            .then((doc) => {\r\n              const updatedTeam = doc.data();\r\n              const time = moment().format(\"DD MM YYYY\");\r\n              updatedTeam.projects[projectIndex].expenses.push({\r\n                amount: parseInt(numberValue, 10),\r\n                reason: reason,\r\n                moment: time,\r\n              });\r\n\r\n              db.collection(\"teams\").doc(teamId).set(updatedTeam);\r\n              this.getTeams();\r\n              this.$alert(\"Expense added\", \"Success\", \"success\");\r\n            });\r\n        });\r\n      this.selectedProject = null;\r\n      this.numberValue = null;\r\n      this.reason = \"\";\r\n    },\r\n  },\r\n  computed: {\r\n    signedUser() {\r\n      return store.currentUser;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.blue-button {\r\n  display: block;\r\n  width: 30%;\r\n  padding: 10px;\r\n  text-align: center;\r\n  background-color: rgba(41, 133, 133, 0.3);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  border: 1px solid black;\r\n}\r\n\r\n.flex {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.border {\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  margin: 10px;\r\n  background-color: rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 80%;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  font-weight: bold;\r\n  margin: 0px 20px;\r\n}\r\n\r\n.form-group input {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\n\r\n.form-group select {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}