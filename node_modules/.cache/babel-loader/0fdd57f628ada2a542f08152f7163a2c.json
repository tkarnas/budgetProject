{"remainingRequest":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tomis\\Desktop\\vue-diplomski\\src\\components\\Projects.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\src\\components\\Projects.vue","mtime":1675890592602},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\babel.config.js","mtime":1675890592778},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675708577019},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\babel-loader\\lib\\index.js","mtime":1675708563485},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675708577019},{"path":"C:\\Users\\tomis\\Desktop\\vue-diplomski\\node_modules\\vue-loader\\lib\\index.js","mtime":1675708908543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6XFxVc2Vyc1xcdG9taXNcXERlc2t0b3BcXHZ1ZS1kaXBsb21za2lcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEdyYXBoIGZyb20gIi4uL2NvbXBvbmVudHMvR3JhcGgudnVlIjsKaW1wb3J0IHsgZGIgfSBmcm9tICJAL2ZpcmViYXNlIjsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJvbGVGb3JtIiwKICBjb21wb25lbnRzOiB7CiAgICBHcmFwaDogR3JhcGgKICB9LAogIHByb3BzOiBbImlzQWRtaW4iLCAiaXNUZWFtTGVhZCIsICJpc1VzZXIiLCAidGVhbSIsICJyaWdodHMiLCAidGVhbUluZGV4IiwgInRlYW1zIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzQ2xpY2tlZDogZmFsc2UsCiAgICAgIGlzQ2xpY2tlZDI6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VGVhbXM6IGZ1bmN0aW9uIGdldFRlYW1zKCkgewogICAgICB0aGlzLiRlbWl0KCJjYWxsLWdldC10ZWFtcyIpOwogICAgfSwKICAgIHNob3dOb1Byb2plY3RzV2luZG93OiBmdW5jdGlvbiBzaG93Tm9Qcm9qZWN0c1dpbmRvdygpIHsKICAgICAgdGhpcy4kZW1pdCgibm8tcHJvamVjdHMiKTsKICAgIH0sCiAgICB1c2VyQ2FuU2VlOiBmdW5jdGlvbiB1c2VyQ2FuU2VlKHByb2plY3QpIHsKICAgICAgaWYgKHRoaXMucmlnaHRzID09PSAiQWRtaW4iIHx8IHRoaXMucmlnaHRzID09PSAiVGVhbSBMZWFkIikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBpZiAocHJvamVjdC5wZW9wbGUgJiYgcHJvamVjdC5wZW9wbGUubGVuZ3RoKSB7CiAgICAgICAgdmFyIGZvdW5kOwoKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocHJvamVjdC5wZW9wbGUpLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciB1c2VyID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICBpZiAodXNlciA9PT0gdGhpcy5zaWduZWRVc2VyKSB7CiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoKICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dOb1Byb2plY3RzV2luZG93KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnNob3dOb1Byb2plY3RzV2luZG93KCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBkZWxldGVQcm9qZWN0OiBmdW5jdGlvbiBkZWxldGVQcm9qZWN0KHRlYW1JbmRleCwgcHJvamVjdEluZGV4LCBwcm9qZWN0KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCJBcmUgeW91IHN1cmU/IikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRlYW0gPSBfdGhpcy50ZWFtc1t0ZWFtSW5kZXhdOwogICAgICAgIGRiLmNvbGxlY3Rpb24oInRlYW1zIikud2hlcmUoIm5hbWUiLCAiPT0iLCB0ZWFtLnRlYW1OYW1lKS53aGVyZSgiYnVkZ2V0IiwgIj09IiwgdGVhbS50ZWFtQnVkZ2V0KS5nZXQoKS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgaWYgKHNuYXBzaG90LmVtcHR5KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgICAgdmFyIHRlYW1JZCA9IGRvYy5pZDsKICAgICAgICAgICAgdmFyIHByb2plY3RzID0gZG9jLmRhdGEoKS5wcm9qZWN0czsKICAgICAgICAgICAgcHJvamVjdHMgPSBwcm9qZWN0cy5maWx0ZXIoZnVuY3Rpb24gKHByb2plY3QsIGluZGV4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ICE9PSBwcm9qZWN0SW5kZXg7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ0ZWFtcyIpLmRvYyh0ZWFtSWQpLnVwZGF0ZSh7CiAgICAgICAgICAgICAgcHJvamVjdHM6IHByb2plY3RzCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzLiRhbGVydCgiUHJvamVjdCAiLmNvbmNhdChwcm9qZWN0LnByb2plY3ROYW1lLCAiIGRlbGV0ZWQiKSwgIlN1Y2Nlc3MiLCAic3VjY2VzcyIpOwoKICAgICAgICAgICAgICBfdGhpcy5nZXRUZWFtcygpOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBfdGhpcy4kYWxlcnQoZXJyb3IsICJFcnJvciIsICJlcnJvciIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuJGFsZXJ0KGVycm9yLCAiRXJyb3IiLCAiZXJyb3IiKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc2lnbmVkVXNlcjogZnVuY3Rpb24gc2lnbmVkVXNlcigpIHsKICAgICAgcmV0dXJuIHN0b3JlLmN1cnJlbnRVc2VyOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Projects.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <ul v-if=\"isAdmin || isTeamLead || isUser\">\r\n      <li v-for=\"(project, projectIndex) in team.projects\" :key=\"projectIndex\">\r\n        <div class=\"projects\" v-if=\"userCanSee(project)\">\r\n          Project Name: {{ project.projectName }}\r\n          <div v-if=\"!isUser\">\r\n            Project Budget: {{ project.projectBudget }} €\r\n            <br />\r\n            <b\r\n              >Left:\r\n              {{\r\n                project.projectBudget -\r\n                project.expenses.reduce((a, b) => a + (b[\"amount\"] || 0), 0)\r\n              }}\r\n              €</b\r\n            >\r\n          </div>\r\n          <div\r\n            class=\"button\"\r\n            v-if=\"project.expenses.length && !isUser\"\r\n            @click=\"isClicked = !isClicked\"\r\n          >\r\n            Check expenses\r\n            <div v-if=\"isClicked\">\r\n              <div v-for=\"(expense, index) in project.expenses\" :key=\"index\">\r\n                {{ expense.moment }} - {{ expense.amount }} € - Reason:\r\n                {{ expense.reason }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"expand\"\r\n            v-if=\"project.people.length && !isUser\"\r\n            @click=\"isClicked2 = !isClicked2\"\r\n          >\r\n            Project members\r\n            <div v-if=\"isClicked2\">\r\n              <div v-for=\"(people, index) in project.people\" :key=\"index\">\r\n                {{ people }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"!isUser\">\r\n            <Graph :project=\"project\"></Graph>\r\n          </div>\r\n          <div\r\n            class=\"red-button\"\r\n            v-if=\"isAdmin\"\r\n            @click=\"deleteProject(teamIndex, projectIndex, project)\"\r\n          >\r\n            Delete\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Graph from \"../components/Graph.vue\";\r\nimport { db } from \"@/firebase\";\r\nimport store from \"@/store.js\";\r\n\r\nexport default {\r\n  name: \"RoleForm\",\r\n  components: {\r\n    Graph,\r\n  },\r\n  props: [\r\n    \"isAdmin\",\r\n    \"isTeamLead\",\r\n    \"isUser\",\r\n    \"team\",\r\n    \"rights\",\r\n    \"teamIndex\",\r\n    \"teams\",\r\n  ],\r\n  data() {\r\n    return {\r\n      isClicked: false,\r\n      isClicked2: false,\r\n    };\r\n  },\r\n  methods: {\r\n    getTeams() {\r\n      this.$emit(\"call-get-teams\");\r\n    },\r\n    showNoProjectsWindow() {\r\n      this.$emit(\"no-projects\");\r\n    },\r\n    userCanSee(project) {\r\n      if (this.rights === \"Admin\" || this.rights === \"Team Lead\") {\r\n        return true;\r\n      }\r\n      if (project.people && project.people.length) {\r\n        let found;\r\n        for (const user of project.people) {\r\n          if (user === this.signedUser) {\r\n            found = true;\r\n            if (!found) {\r\n              this.showNoProjectsWindow();\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      }\r\n      this.showNoProjectsWindow();\r\n      return false;\r\n    },\r\n    deleteProject(teamIndex, projectIndex, project) {\r\n      this.$confirm(\"Are you sure?\").then(() => {\r\n        const team = this.teams[teamIndex];\r\n        db.collection(\"teams\")\r\n          .where(\"name\", \"==\", team.teamName)\r\n          .where(\"budget\", \"==\", team.teamBudget)\r\n          .get()\r\n          .then((snapshot) => {\r\n            if (snapshot.empty) {\r\n              return;\r\n            }\r\n            snapshot.forEach((doc) => {\r\n              const teamId = doc.id;\r\n              let projects = doc.data().projects;\r\n              projects = projects.filter(\r\n                (project, index) => index !== projectIndex\r\n              );\r\n              db.collection(\"teams\")\r\n                .doc(teamId)\r\n                .update({\r\n                  projects: projects,\r\n                })\r\n                .then(() => {\r\n                  this.$alert(\r\n                    `Project ${project.projectName} deleted`,\r\n                    \"Success\",\r\n                    \"success\"\r\n                  );\r\n                  this.getTeams();\r\n                })\r\n                .catch((error) => {\r\n                  this.$alert(error, \"Error\", \"error\");\r\n                });\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            this.$alert(error, \"Error\", \"error\");\r\n          });\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    signedUser() {\r\n      return store.currentUser;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.red-button {\r\n  display: block;\r\n  padding-left: 15px;\r\n  width: 30%;\r\n  background-color: rgba(255, 0, 0, 0.13);\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-top: 2px;\r\n  border: 1px solid black;\r\n}\r\n\r\n.button {\r\n  display: block;\r\n  padding-left: 15px;\r\n  width: 30%;\r\n  background-color: rgba(136, 238, 69, 0.288);\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-top: 2px;\r\n  border: 1px solid black;\r\n}\r\n\r\n.expand {\r\n  display: block;\r\n  padding-left: 15px;\r\n  width: 30%;\r\n  background-color: rgba(43, 146, 172, 0.438);\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-top: 2px;\r\n  border: 1px solid black;\r\n}\r\n\r\n.projects {\r\n  margin-top: 20px;\r\n  background-color: rgba(240, 230, 140, 0.2);\r\n  max-width: 100%;\r\n  border: 1px solid black;\r\n  border-radius: 4px;\r\n  padding: 5px;\r\n}\r\n\r\nul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\nli {\r\n  margin: 10px 0;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}